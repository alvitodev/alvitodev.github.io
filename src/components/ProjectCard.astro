---
import type { CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';
import { Icon } from 'astro-icon/components';

interface Props {
  project: CollectionEntry<'work'>;
  index: number;
}

const { project, index } = Astro.props;
const isImageRight = index % 2 !== 0; // Ganjil = Kanan, Genap = Kiri (atau sebaliknya, sesuaikan selera)
---

<a href={`/work/${project.id}`} class="block group w-full mb-12">
  <div class={`
    relative flex flex-col md:flex-row w-full
    border border-zinc-800 bg-zinc-950/80 backdrop-blur-md
    hover:border-amber-500/50 transition-all duration-500
    ${isImageRight ? 'md:flex-row-reverse' : ''}
  `}>
    
    {/* --- IMAGE SECTION (Full Bleed) --- */}
    <div class="relative w-full md:w-[55%] h-64 md:h-auto overflow-hidden bg-zinc-900 border-r border-zinc-800">
      
      {/* 1. Gambar Dasar */}
      {project.data.heroImage && (
        <Image 
          src={project.data.heroImage} 
          alt={project.data.title} 
          width={800} 
          height={500} 
          class="w-full h-full object-cover opacity-60 grayscale group-hover:grayscale-0 group-hover:opacity-100 group-hover:scale-105 transition-all duration-700 ease-out" 
        />
      )}

      {/* 2. Tech Grid Overlay (Efek Kotak-kotak Halus) */}
      <div class="absolute inset-0 bg-[linear-gradient(to_right,#000_1px,transparent_1px),linear-gradient(to_bottom,#000_1px,transparent_1px)] bg-[size:24px_24px] opacity-30 pointer-events-none z-10 mix-blend-overlay"></div>

      {/* 3. Glitch/Block Fade Mask (Gradasi Kasar ke arah konten) */}
      <div class={`absolute inset-0 z-20 pointer-events-none bg-gradient-to-${isImageRight ? 'l' : 'r'} from-zinc-950 via-zinc-950/20 to-transparent`}></div>

      {/* 4. Dekorasi Sudut (Corner Brackets) */}
      <div class="absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-amber-500/0 group-hover:border-amber-500/100 transition-colors z-30"></div>
      <div class="absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-amber-500/0 group-hover:border-amber-500/100 transition-colors z-30"></div>
    
    </div>

    {/* --- CONTENT SECTION --- */}
    <div class="relative flex flex-col justify-between w-full md:w-[45%] p-6 md:p-8">
      
      {/* Background Scanline khusus area teks */}
      <div class="absolute inset-0 bg-[linear-gradient(transparent_2px,#18181b_2px)] bg-[size:100%_4px] opacity-20 pointer-events-none"></div>

      <div>
        {/* Header: Status & Title */}
        <div class="flex items-start justify-between gap-4 mb-4">
          <h3 class="text-2xl font-black font-mono text-zinc-100 tracking-tight group-hover:text-amber-500 transition-colors uppercase">
            {project.data.title}
          </h3>
          <div class={`shrink-0 px-2 py-1 text-[10px] font-mono border rounded uppercase tracking-wider ${
            project.data.status === 'completed' 
              ? 'border-green-900 text-green-500 bg-green-900/10' 
              : 'border-amber-900 text-amber-500 bg-amber-900/10'
          }`}>
            {project.data.status}
          </div>
        </div>

        <p class="text-sm font-mono text-zinc-400 leading-relaxed line-clamp-3 mb-6">
          {project.data.description}
        </p>
      </div>

      {/* Footer: Tech Stack & Action */}
      <div class="space-y-4">
        <div class="w-full h-px bg-zinc-800"></div> {/* Separator Line */}
        
        <div class="flex flex-wrap gap-2">
          {project.data.techStack.slice(0, 4).map(t => (
            <span class="text-[10px] font-mono uppercase px-2 py-1 border border-zinc-700 text-zinc-500 group-hover:border-zinc-500 group-hover:text-zinc-300 transition-colors">
              {t}
            </span>
          ))}
        </div>

        <div class="flex items-center gap-2 text-xs font-mono text-amber-600 opacity-0 transform translate-x-[-10px] group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300">
          <span class="animate-pulse">></span> INITIALIZING_SEQUENCE...
        </div>
      </div>

    </div>

  </div>
</a>