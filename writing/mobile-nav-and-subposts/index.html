<!DOCTYPE html><html lang="id-ID" class="scroll-smooth"> <head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"><meta name="generator" content="Astro v5.16.4"><!-- Canonical URL --><link rel="canonical" href="https://alvitodev.github.io/writing/mobile-nav-and-subposts/"><!-- Primary Meta Tags --><title>v1.6.0: &quot;Mobile Navigation &amp; Subposts&quot; | Alvito.dev</title><meta name="title" content="v1.6.0: &#34;Mobile Navigation &#38; Subposts&#34; | Alvito.dev"><meta name="description" content="This new version introduces improved mobile navigation (via sticky table of contents) and the concept of &#34;subposts.&#34;"><meta name="author" content="Muhammad Alvito Devanova"><!-- Open Graph / Facebook --><meta property="og:type" content="article"><meta property="og:url" content="https://alvitodev.github.io/writing/mobile-nav-and-subposts/"><meta property="og:title" content="v1.6.0: &#34;Mobile Navigation &#38; Subposts&#34; | Alvito.dev"><meta property="og:description" content="This new version introduces improved mobile navigation (via sticky table of contents) and the concept of &#34;subposts.&#34;"><meta property="og:image" content="https://alvitodev.github.io/static/1200x630.png"><meta property="og:site_name" content="Alvito.dev"><meta property="og:locale" content="id-ID"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://alvitodev.github.io/writing/mobile-nav-and-subposts/"><meta property="twitter:title" content="v1.6.0: &#34;Mobile Navigation &#38; Subposts&#34; | Alvito.dev"><meta property="twitter:description" content="This new version introduces improved mobile navigation (via sticky table of contents) and the concept of &#34;subposts.&#34;"><meta property="twitter:image" content="https://alvitodev.github.io/static/1200x630.png"><meta property="twitter:creator" content="@alvitodev"><!-- JSON-LD Structured Data --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"v1.6.0: \"Mobile Navigation & Subposts\"","description":"This new version introduces improved mobile navigation (via sticky table of contents) and the concept of \"subposts.\"","image":"https://alvitodev.github.io/static/1200x630.png","author":{"@type":"Person","name":"Muhammad Alvito Devanova","url":"https://alvitodev.github.io/"},"datePublished":"2024-03-19T00:00:00.000Z","dateModified":"2024-03-19T00:00:00.000Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://alvitodev.github.io/writing/mobile-nav-and-subposts/"}}</script><!-- Mobile & PWA --><meta name="HandheldFriendly" content="True"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="format-detection" content="telephone=no,date=no,address=no,email=no,url=no"><meta name="theme-color" content="#121212" media="(prefers-color-scheme: dark)"><meta name="theme-color" content="#121212" media="(prefers-color-scheme: light)"><link rel="sitemap" href="/sitemap-index.xml"><link rel="manifest" href="/site.webmanifest"><link rel="alternate" type="application/rss+xml" title="Alvito.dev" href="https://alvitodev.github.io/rss.xml"><link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="shortcut icon" href="/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><meta name="apple-mobile-web-app-title" content="astro-erudite"><link rel="manifest" href="/site.webmanifest"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.QW52Ox2j.js"></script><link rel="stylesheet" href="/_astro/about.BA91I8cj.css"><script type="module" src="/_astro/page.lxGFV7-1.js"></script></head><script>
    (function() {
      const getThemePreference = () => {
        if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
          return localStorage.getItem('theme');
        }
        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      };
      const isDark = getThemePreference() === 'dark';
      document.documentElement.classList[isDark ? 'add' : 'remove']('dark');
      document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
      document.documentElement.style.colorScheme = isDark ? 'dark' : 'light';
    })();
  </script><body class="flex h-fit min-h-screen flex-col font-sans bg-background text-foreground antialiased relative selection:bg-yellow-500/30"> <div class="fixed inset-0 pointer-events-none z-[1] vignette-layer"></div> <header class="sticky top-0 z-50 w-full border-b border-border bg-background/80 backdrop-blur-md transition-colors duration-300"> <div class="mx-auto flex w-full max-w-7xl items-center justify-between px-4 py-3">  <a href="/" class="group flex items-center gap-2"> <div class="relative flex h-6 w-6 items-center justify-center overflow-hidden border border-zinc-400 bg-zinc-200 transition-colors group-hover:border-yellow-500 dark:border-zinc-700 dark:bg-zinc-900"> <span class="dark:group-hover:text-foreground font-mono text-xs font-bold text-yellow-600 group-hover:text-yellow-700 dark:text-yellow-500">A</span> <div class="absolute top-0 right-0 h-1.5 w-1.5 border-b border-l border-zinc-400 bg-zinc-100 dark:border-zinc-700 dark:bg-zinc-950"></div> </div> <span class="dark:group-hover:text-foreground font-mono text-sm font-bold tracking-tighter text-zinc-700 transition-colors group-hover:text-black dark:text-zinc-300">
ALVITO<span class="text-yellow-600 dark:text-yellow-500">.DEV</span> </span> </a>  <nav class="flex items-center gap-2 sm:gap-4"> <a href="/" class="relative px-3 py-1.5 font-mono text-[10px] tracking-widest transition-all duration-300 sm:text-xs border border-transparent text-zinc-500 hover:bg-zinc-200/50 hover:text-zinc-900 dark:hover:bg-zinc-800/50 dark:hover:text-zinc-200 "> HOME  </a><a href="/writing" class="relative px-3 py-1.5 font-mono text-[10px] tracking-widest transition-all duration-300 sm:text-xs border border-yellow-500/50 bg-yellow-500/10 font-bold text-yellow-600 dark:text-yellow-500 "> WRITING <span class="absolute -top-0.5 -right-0.5 h-1.5 w-1.5 animate-pulse rounded-full bg-yellow-500 shadow-[0_0_8px_rgba(245,158,11,0.8)]"></span> </a><a href="/work" class="relative px-3 py-1.5 font-mono text-[10px] tracking-widest transition-all duration-300 sm:text-xs border border-transparent text-zinc-500 hover:bg-zinc-200/50 hover:text-zinc-900 dark:hover:bg-zinc-800/50 dark:hover:text-zinc-200 "> WORK  </a><a href="/notes" class="relative px-3 py-1.5 font-mono text-[10px] tracking-widest transition-all duration-300 sm:text-xs border border-transparent text-zinc-500 hover:bg-zinc-200/50 hover:text-zinc-900 dark:hover:bg-zinc-800/50 dark:hover:text-zinc-200 "> NOTES  </a><a href="/feed" class="relative px-3 py-1.5 font-mono text-[10px] tracking-widest transition-all duration-300 sm:text-xs border border-transparent text-zinc-500 hover:bg-zinc-200/50 hover:text-zinc-900 dark:hover:bg-zinc-800/50 dark:hover:text-zinc-200 "> FEED  </a><a href="/library" class="relative px-3 py-1.5 font-mono text-[10px] tracking-widest transition-all duration-300 sm:text-xs border border-transparent text-zinc-500 hover:bg-zinc-200/50 hover:text-zinc-900 dark:hover:bg-zinc-800/50 dark:hover:text-zinc-200 "> LIBRARY  </a><a href="/gallery" class="relative px-3 py-1.5 font-mono text-[10px] tracking-widest transition-all duration-300 sm:text-xs border border-transparent text-zinc-500 hover:bg-zinc-200/50 hover:text-zinc-900 dark:hover:bg-zinc-800/50 dark:hover:text-zinc-200 "> GALLERY  </a><a href="/about" class="relative px-3 py-1.5 font-mono text-[10px] tracking-widest transition-all duration-300 sm:text-xs border border-transparent text-zinc-500 hover:bg-zinc-200/50 hover:text-zinc-900 dark:hover:bg-zinc-800/50 dark:hover:text-zinc-200 "> ABOUT  </a>  <div class="mx-1 hidden h-4 w-[1px] bg-zinc-300 sm:block dark:bg-zinc-800"></div>  <div class="scale-90"> <button id="theme-toggle" type="button" class="relative inline-flex h-9 w-9 items-center justify-center rounded-md border border-zinc-200 bg-transparent text-zinc-500 transition-colors hover:bg-zinc-100 hover:text-zinc-900 focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 dark:border-zinc-800 dark:text-zinc-400 dark:hover:bg-zinc-800 dark:hover:text-zinc-50 dark:focus-visible:ring-zinc-300" aria-label="Toggle theme"> <svg width="1em" height="1em" class="h-[1.2rem] w-[1.2rem] scale-100 rotate-0 transition-all dark:scale-0 dark:-rotate-90" data-icon="lucide:sun">   <symbol id="ai:lucide:sun" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="4"/><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></g></symbol><use href="#ai:lucide:sun"></use>  </svg> <svg width="1em" height="1em" class="absolute h-[1.2rem] w-[1.2rem] scale-0 rotate-90 transition-all dark:scale-100 dark:rotate-0" data-icon="lucide:moon">   <symbol id="ai:lucide:moon" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"/></symbol><use href="#ai:lucide:moon"></use>  </svg> </button> <script>
  function setupThemeToggle() {
    const button = document.getElementById('theme-toggle')
    // Sync initial theme from storage or system preference
    const applyTheme = (theme) => {
      const element = document.documentElement
      const isDark = theme === 'dark'
      if (isDark) element.classList.add('dark')
      else element.classList.remove('dark')
      element.setAttribute('data-theme', isDark ? 'dark' : 'light')
      element.style.colorScheme = isDark ? 'dark' : 'light'
    }

    const getStoredTheme = () => {
      try {
        const t = localStorage.getItem('theme')
        if (t === 'dark' || t === 'light') return t
      } catch (e) {}
      return window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark'
        : 'light'
    }

    // Apply stored theme immediately (important for client-side navigations)
    try {
      applyTheme(getStoredTheme())
    } catch (e) {}

    // Fungsi toggle
    const handleToggleClick = () => {
      const element = document.documentElement
      element.classList.toggle('dark')

      const isDark = element.classList.contains('dark')
      try {
        localStorage.setItem('theme', isDark ? 'dark' : 'light')
      } catch (e) {}

      // Update atribut data-theme juga untuk CSS selector
      element.setAttribute('data-theme', isDark ? 'dark' : 'light')

      // üîë PENTING: Trigger repaint agar CSS variables terupdate dengan baik
      // Ini memastikan vignette, grid, dan semua elemen lain switch tema dengan smooth
      element.style.colorScheme = isDark ? 'dark' : 'light'
    }

    // Tambahkan listener sekali saja per button instance
    if (button && !button.dataset.themeInit) {
      button.addEventListener('click', handleToggleClick)
      button.dataset.themeInit = 'true'
    }
  }

  // Jalankan saat load awal
  setupThemeToggle()

  // Jalankan ulang saat navigasi (jika pakai View Transitions)
  document.addEventListener('astro:page-load', setupThemeToggle)
</script> </div> </nav> </div> <div class="contents [&:not(:empty)]:block [&:not(:empty)]:border-t [&:not(:empty)]:border-border"> <div id="mobile-subposts-container" class="w-full xl:hidden"><details class="group"><summary class="flex w-full cursor-pointer items-center justify-between"><div class="mx-auto flex w-full max-w-3xl items-center px-4 py-3"><div class="relative mr-2 size-4"><svg width="1em" height="1em" viewBox="0 0 24 24" class="size-4 flex-shrink-0" aria-hidden="true" data-icon="lucide:book-open-text">   <use href="#ai:lucide:book-open-text"></use>  </svg></div><div class="flex flex-grow flex-col truncate text-sm"><span class="text-muted-foreground truncate">v1.6.0: &quot;Mobile Navigation &amp; Subposts&quot;</span></div><span class="text-muted-foreground ml-2"><svg width="1em" height="1em" class="h-4 w-4 transition-transform duration-200 group-open:rotate-180" data-icon="lucide:chevron-down">   <symbol id="ai:lucide:chevron-down" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m6 9l6 6l6-6"/></symbol><use href="#ai:lucide:chevron-down"></use>  </svg></span></div></summary><style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1NOU0m" prefix="r19" component-url="/_astro/scroll-area.SV-Nx2Ro.js" component-export="ScrollArea" renderer-url="/_astro/client.i8_f7Fkk.js" props="{&quot;className&quot;:[0,&quot;mx-auto max-w-3xl&quot;],&quot;data-subposts-header-scroll&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;ScrollArea&quot;,&quot;value&quot;:true}" await-children><div dir="ltr" data-slot="scroll-area" class="relative mx-auto max-w-3xl" data-subposts-header-scroll="true" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><astro-slot><div class="max-h-[30vh]"><ul class="flex list-none flex-col gap-y-1 px-4 pb-4"><li><div class="text-foreground bg-muted mobile-subposts-active-item flex items-center gap-2 rounded-md px-2 py-1.5 text-sm font-medium"><svg width="1em" height="1em" viewBox="0 0 24 24" class="size-4 flex-shrink-0" aria-hidden="true" data-icon="lucide:book-open-text">   <use href="#ai:lucide:book-open-text"></use>  </svg><div class="flex flex-col"><span class="line-clamp-2">v1.6.0: &quot;Mobile Navigation &amp; Subposts&quot;</span><span class="text-muted-foreground/80 text-xs">0 min read</span></div></div></li><div class="ml-4 space-y-1"><a href="/writing/mobile-nav-and-subposts/mobile-navigation" class="mobile-subposts-link hover:text-foreground text-muted-foreground hover:bg-muted/50 flex items-center gap-2 rounded-md px-2 py-1.5 text-sm transition-colors"><svg width="1em" height="1em" viewBox="0 0 24 24" class="size-4 flex-shrink-0" aria-hidden="true" data-icon="lucide:file">   <use href="#ai:lucide:file"></use>  </svg><div class="flex flex-col"><span class="line-clamp-2">Implementing sticky mobile navigation</span><span class="text-muted-foreground/80 hover:text-foreground/80 text-xs">0 min read</span></div></a><a href="/writing/mobile-nav-and-subposts/subposts" class="mobile-subposts-link hover:text-foreground text-muted-foreground hover:bg-muted/50 flex items-center gap-2 rounded-md px-2 py-1.5 text-sm transition-colors"><svg width="1em" height="1em" viewBox="0 0 24 24" class="size-4 flex-shrink-0" aria-hidden="true" data-icon="lucide:file">   <use href="#ai:lucide:file"></use>  </svg><div class="flex flex-col"><span class="line-clamp-2">Implementing file-based subpost routing</span><span class="text-muted-foreground/80 hover:text-foreground/80 text-xs">0 min read</span></div></a></div></ul></div></astro-slot></div></div></div><!--astro:end--></astro-island></details></div><script type="module">class m{scrollArea=null;detailsElement=null;headerScrollArea=null;reset(){this.scrollArea=null,this.detailsElement=null,this.headerScrollArea=null}}const e=new m;class i{static update(){if(!e.scrollArea||!e.headerScrollArea)return;const{scrollTop:t,scrollHeight:l,clientHeight:r}=e.scrollArea,s=5,a=t<=s,c=t>=l-r-s;e.headerScrollArea.classList.toggle("mask-t-from-80%",!a),e.headerScrollArea.classList.toggle("mask-b-from-80%",!c)}}class n{static toActive(){if(!e.scrollArea)return;const t=e.scrollArea.querySelector(".mobile-subposts-active-item");if(!t)return;const{top:l,height:r}=e.scrollArea.getBoundingClientRect(),{top:s,height:a}=t.getBoundingClientRect(),c=s-l+e.scrollArea.scrollTop,u=Math.max(0,Math.min(c-(r-a)/2,e.scrollArea.scrollHeight-e.scrollArea.clientHeight));e.scrollArea.scrollTop=u}static setupInteraction(){const t=document.getElementById("mobile-subposts-container");if(!t)return;e.scrollArea=t.querySelector("[data-radix-scroll-area-viewport]"),e.detailsElement=t.querySelector("details"),e.headerScrollArea=t.querySelector("[data-subposts-header-scroll]");const l=t.querySelectorAll(".mobile-subposts-link");e.scrollArea&&e.scrollArea.addEventListener("scroll",i.update,{passive:!0}),e.detailsElement&&e.detailsElement.addEventListener("toggle",()=>{e.detailsElement?.open&&requestAnimationFrame(()=>{n.toActive(),setTimeout(i.update,100)})}),l.forEach(r=>{r.addEventListener("click",()=>{e.detailsElement&&(e.detailsElement.open=!1)})})}}class o{static init(){e.reset(),n.setupInteraction()}static cleanup(){e.scrollArea&&e.scrollArea.removeEventListener("scroll",i.update),e.reset()}}document.addEventListener("astro:page-load",()=>o.init());document.addEventListener("astro:after-swap",()=>{o.cleanup(),o.init()});document.addEventListener("astro:before-swap",()=>o.cleanup());</script> <div id="mobile-toc-container" class="w-full xl:hidden"><details class="group"><summary class="flex w-full cursor-pointer items-center justify-between"><div class="mx-auto flex w-full max-w-3xl items-center px-4 py-3"><div class="relative mr-2 size-4"><svg class="h-4 w-4" viewBox="0 0 24 24"><circle class="text-primary/20" cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"></circle><circle id="mobile-toc-progress-circle" class="text-primary" cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2" stroke-dasharray="62.83" stroke-dashoffset="62.83" transform="rotate(-90 12 12)"></circle></svg></div><span id="mobile-toc-current-section" class="text-muted-foreground flex-grow truncate text-sm">
Overview
</span><span class="text-muted-foreground ml-2"><svg width="1em" height="1em" viewBox="0 0 24 24" class="h-4 w-4 transition-transform duration-200 group-open:rotate-180" data-icon="lucide:chevron-down">   <use href="#ai:lucide:chevron-down"></use>  </svg></span></div></summary><astro-island uid="Z2uba1I" prefix="r11" component-url="/_astro/scroll-area.SV-Nx2Ro.js" component-export="ScrollArea" renderer-url="/_astro/client.i8_f7Fkk.js" props="{&quot;className&quot;:[0,&quot;mx-auto max-w-3xl&quot;],&quot;data-toc-header-scroll&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;ScrollArea&quot;,&quot;value&quot;:true}" await-children><div dir="ltr" data-slot="scroll-area" class="relative mx-auto max-w-3xl" data-toc-header-scroll="true" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><astro-slot><div class="max-h-[30vh]"><ul class="flex list-none flex-col gap-y-2 px-4 pb-4" id="mobile-table-of-contents"><li class="px-4 text-sm text-foreground/60"><a href="#two-major-improvements-to-the-reading-experience" class="mobile-toc-item underline decoration-transparent underline-offset-[3px] transition-colors duration-200 hover:decoration-inherit" data-heading-id="two-major-improvements-to-the-reading-experience">Two major improvements to the reading experience</a></li><li class="px-4 text-sm ml-4 text-foreground/60"><a href="#mobile-navigation" class="mobile-toc-item underline decoration-transparent underline-offset-[3px] transition-colors duration-200 hover:decoration-inherit" data-heading-id="mobile-navigation">Mobile navigation</a></li><li class="px-4 text-sm ml-4 text-foreground/60"><a href="#subposts-for-hierarchical-content-organization" class="mobile-toc-item underline decoration-transparent underline-offset-[3px] transition-colors duration-200 hover:decoration-inherit" data-heading-id="subposts-for-hierarchical-content-organization">Subposts for hierarchical content organization</a></li><li class="px-4 text-sm ml-8 text-foreground/60"><a href="#enhanced-navigation-patterns" class="mobile-toc-item underline decoration-transparent underline-offset-[3px] transition-colors duration-200 hover:decoration-inherit" data-heading-id="enhanced-navigation-patterns">Enhanced navigation patterns</a></li><li class="px-4 text-sm ml-8 text-foreground/60"><a href="#hint-this-is-great-for-technical-content" class="mobile-toc-item underline decoration-transparent underline-offset-[3px] transition-colors duration-200 hover:decoration-inherit" data-heading-id="hint-this-is-great-for-technical-content">Hint: this is great for technical content</a></li><li class="px-4 text-sm text-foreground/60"><a href="#go-ahead-and-read-the-subposts" class="mobile-toc-item underline decoration-transparent underline-offset-[3px] transition-colors duration-200 hover:decoration-inherit" data-heading-id="go-ahead-and-read-the-subposts">Go ahead and read the subposts</a></li></ul></div></astro-slot></div></div></div><!--astro:end--></astro-island></details></div><script type="module" src="/_astro/TOCHeader.astro_astro_type_script_index_0_lang.CKMLAwWj.js"></script> </div> </header> <main class="w-full mx-auto flex grow flex-col gap-y-6 px-4 relative z-10"> <section class="grid grid-cols-[minmax(0px,1fr)_min(calc(var(--breakpoint-md)-2rem),100%)_minmax(0px,1fr)] gap-y-6 lg:gap-y-8">  <div class="col-start-2 pt-6"> <nav aria-label="breadcrumb" data-slot="breadcrumb"> <ol data-slot="breadcrumb-list" class="text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5"> <li data-slot="breadcrumb-item" class="inline-flex items-center gap-1.5"> <a data-slot="breadcrumb-link" class="hover:text-foreground transition-colors" href="/"> <svg width="1em" height="1em" class="size-4 shrink-0" data-icon="lucide:home">   <symbol id="ai:lucide:home" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></g></symbol><use href="#ai:lucide:home"></use>  </svg> </a> </li>  <li data-slot="breadcrumb-separator" role="presentation" aria-hidden="true" class="[&amp;&gt;svg]:size-3.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right"><path d="m9 18 6-6-6-6"></path></svg></li> <li data-slot="breadcrumb-item" class="inline-flex items-center gap-1.5"><a data-slot="breadcrumb-link" class="hover:text-foreground transition-colors" href="/writing"> <span class="flex items-center gap-x-2"> <svg width="1em" height="1em" class="size-4 shrink-0" data-icon="lucide:terminal">   <symbol id="ai:lucide:terminal" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19h8M4 17l6-6l-6-6"/></symbol><use href="#ai:lucide:terminal"></use>  </svg> <span>Writing</span> </span> </a></li>  <li data-slot="breadcrumb-separator" role="presentation" aria-hidden="true" class="[&amp;&gt;svg]:size-3.5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right"><path d="m9 18 6-6-6-6"></path></svg></li> <li data-slot="breadcrumb-item" class="inline-flex items-center gap-1.5"><span data-slot="breadcrumb-page" role="link" aria-disabled="true" aria-current="page" class="text-foreground font-normal"> <span class="flex items-center gap-x-2"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="size-4 shrink-0" data-icon="lucide:book-open-text">   <use href="#ai:lucide:book-open-text"></use>  </svg> <span>v1.6.0: &quot;Mobile Navigation &amp; Subposts&quot;</span> </span> </span></li> </ol> </nav> </div>    <section class="col-start-2 flex flex-col gap-y-6 text-center pt-2"> <div class="flex flex-col"> <h1 class="mb-4 scroll-mt-31 text-3xl font-bold font-mono tracking-tight sm:text-5xl text-foreground" id="post-title"> v1.6.0: &quot;Mobile Navigation &amp; Subposts&quot; </h1> <div class="text-muted-foreground divide-border mb-6 flex flex-col items-center justify-center divide-y text-xs font-mono sm:flex-row sm:flex-wrap sm:divide-x sm:divide-y-0">  <!-- {
            authors.length > 0 && (
              <div class="flex w-full items-center justify-center gap-x-2 py-2 sm:w-fit sm:px-2 sm:py-0 first:sm:pl-0 last:sm:pr-0">
                {authors.map((author) => (
                  <div class="flex items-center gap-x-1.5">
                    {/* ... author logic ... */}
                    <span>{author.name}</span>
                  </div>
                ))}
              </div>
            )
          } -->  <div class="flex w-full items-center justify-center gap-2 py-2 sm:w-fit sm:px-2 sm:py-0 first:sm:pl-0 last:sm:pr-0 text-yellow-500"> <svg width="1em" height="1em" class="size-3" data-icon="lucide:calendar">   <symbol id="ai:lucide:calendar" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M8 2v4m8-4v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/></g></symbol><use href="#ai:lucide:calendar"></use>  </svg> <span>March 19, 2024</span> /* FIX: date -> publishDate */
</div>  <div class="flex w-full items-center justify-center gap-2 py-2 sm:w-fit sm:px-2 sm:py-0 first:sm:pl-0 last:sm:pr-0"> <span> 0 min read  </span> </div>  <div class="flex w-full items-center justify-center gap-1 py-2 sm:w-fit sm:px-2 sm:py-0 first:sm:pl-0 last:sm:pr-0"> <svg width="1em" height="1em" class="size-3" data-icon="lucide:layers">   <symbol id="ai:lucide:layers" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"/><path d="M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"/><path d="M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"/></g></symbol><use href="#ai:lucide:layers"></use>  </svg> 2 subposts </div> </div>  <div class="flex flex-wrap justify-center gap-2"> <span class="inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&#38;>svg]:size-3 gap-1 [&#38;>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden text-foreground [a&#38;]:hover:bg-muted [a&#38;]:hover:text-foreground font-mono text-xs border-border text-muted-foreground"> <svg width="1em" height="1em" class="size-3 mr-1" data-icon="lucide:hash">   <symbol id="ai:lucide:hash" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 9h16M4 15h16M10 3L8 21m8-18l-2 18"/></symbol><use href="#ai:lucide:hash"></use>  </svg> v1.6.0 </span> </div> </div> <div class="mt-8 flex flex-col gap-4 border-t border-zinc-800 pt-8 sm:flex-row sm:justify-between"> <a href="/writing/rehype-patch" class="group flex flex-col gap-1 text-left sm:max-w-[45%]"> <span class="flex items-center gap-1 font-mono text-xs text-zinc-500 transition-colors group-hover:text-yellow-500"> <svg width="1em" height="1em" class="size-3" data-icon="lucide:arrow-left">   <symbol id="ai:lucide:arrow-left" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m12 19l-7-7l7-7m7 7H5"/></symbol><use href="#ai:lucide:arrow-left"></use>  </svg>
PREVIOUS_LOG
</span> <span class="group-hover:text-foreground line-clamp-2 text-sm font-bold text-zinc-300 transition-colors"> v1.3.0: ‚ÄúPatches in Production‚Äù </span> </a> <a href="/writing/callouts-component" class="group flex flex-col gap-1 text-right sm:max-w-[45%]"> <span class="flex items-center justify-end gap-1 font-mono text-xs text-zinc-500 transition-colors group-hover:text-yellow-500">
NEXT_LOG
<svg width="1em" height="1em" class="size-3" data-icon="lucide:arrow-right">   <symbol id="ai:lucide:arrow-right" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7-7l7 7l-7 7"/></symbol><use href="#ai:lucide:arrow-right"></use>  </svg> </span> <span class="group-hover:text-foreground line-clamp-2 text-sm font-bold text-zinc-300 transition-colors"> v1.5.0: ‚ÄúA Callout Component for Nerds‚Äù </span> </a> </div> </section>  <div id="toc-sidebar-container" class="sticky top-20 col-start-1 row-span-1 mr-8 ml-auto hidden h-[calc(100vh-5rem)] max-w-md xl:block"><astro-island uid="7iJ6b" prefix="r3" component-url="/_astro/scroll-area.SV-Nx2Ro.js" component-export="ScrollArea" renderer-url="/_astro/client.i8_f7Fkk.js" props="{&quot;className&quot;:[0,&quot;flex max-h-[calc(100vh-8rem)] flex-col overflow-y-auto&quot;],&quot;type&quot;:[0,&quot;hover&quot;],&quot;data-toc-scroll-area&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;ScrollArea&quot;,&quot;value&quot;:true}" await-children><div dir="ltr" data-slot="scroll-area" class="relative flex max-h-[calc(100vh-8rem)] flex-col overflow-y-auto" data-toc-scroll-area="true" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><astro-slot><div class="flex flex-col gap-2 px-4"><span class="text-lg font-medium">Table of Contents</span><ul class="flex list-none flex-col gap-y-2"><li class="text-sm text-foreground/60"><a href="#two-major-improvements-to-the-reading-experience" class="marker:text-foreground/30 list-none underline decoration-transparent underline-offset-[3px] transition-colors duration-200 hover:decoration-inherit" data-heading-link="two-major-improvements-to-the-reading-experience">Two major improvements to the reading experience</a></li><li class="text-sm ml-4 text-foreground/60"><a href="#mobile-navigation" class="marker:text-foreground/30 list-none underline decoration-transparent underline-offset-[3px] transition-colors duration-200 hover:decoration-inherit" data-heading-link="mobile-navigation">Mobile navigation</a></li><li class="text-sm ml-4 text-foreground/60"><a href="#subposts-for-hierarchical-content-organization" class="marker:text-foreground/30 list-none underline decoration-transparent underline-offset-[3px] transition-colors duration-200 hover:decoration-inherit" data-heading-link="subposts-for-hierarchical-content-organization">Subposts for hierarchical content organization</a></li><li class="text-sm text-foreground/60"><a href="#go-ahead-and-read-the-subposts" class="marker:text-foreground/30 list-none underline decoration-transparent underline-offset-[3px] transition-colors duration-200 hover:decoration-inherit" data-heading-link="go-ahead-and-read-the-subposts">Go ahead and read the subposts</a></li></ul></div></astro-slot></div></div></div><!--astro:end--></astro-island></div><script type="module">class f{links=document.querySelectorAll("[data-heading-link]");activeIds=[];headings=[];regions=[];scrollArea=null;tocScrollArea=null;reset(){this.links=document.querySelectorAll("#toc-sidebar-container [data-heading-link]"),this.activeIds=[],this.headings=[],this.regions=[];const t=document.getElementById("toc-sidebar-container");this.scrollArea=t?.querySelector("[data-radix-scroll-area-viewport]")||null,this.tocScrollArea=t?.querySelector("[data-toc-scroll-area]")||null}}const e=new f;class c{static build(){if(e.headings=Array.from(document.querySelectorAll(".prose h2, .prose h3, .prose h4, .prose h5, .prose h6")),e.headings.length===0){e.regions=[];return}e.regions=e.headings.map((t,o)=>{const i=e.headings[o+1];return{id:t.id,start:t.offsetTop,end:i?i.offsetTop:document.body.scrollHeight}})}static getVisibleIds(){if(e.headings.length===0)return[];const t=window.scrollY+150,o=window.scrollY+window.innerHeight,i=new Set,l=(s,r)=>s>=t&&s<=o||r>=t&&r<=o||s<=t&&r>=o;return e.headings.forEach(s=>{const r=s.offsetTop+s.offsetHeight;l(s.offsetTop,r)&&i.add(s.id)}),e.regions.forEach(s=>{if(s.start<=o&&s.end>=t){const r=document.getElementById(s.id);if(r){const a=r.offsetTop+r.offsetHeight;s.end>a&&(a<o||t<s.end)&&i.add(s.id)}}}),Array.from(i)}}class h{static update(){if(!e.scrollArea||!e.tocScrollArea)return;const{scrollTop:t,scrollHeight:o,clientHeight:i}=e.scrollArea,l=5,s=t<=l,r=t>=o-i-l;e.tocScrollArea.classList.toggle("mask-t-from-90%",!s),e.tocScrollArea.classList.toggle("mask-b-from-90%",!r)}}class g{static update(t){e.links.forEach(o=>{o.classList.remove("text-foreground")}),t.forEach(o=>{if(o){const i=document.querySelector(`#toc-sidebar-container [data-heading-link="${o}"]`);i&&i.classList.add("text-foreground")}}),this.scrollToActive(t)}static scrollToActive(t){if(!e.scrollArea||!t.length)return;const o=document.querySelector(`#toc-sidebar-container [data-heading-link="${t[0]}"]`);if(!o)return;const{top:i,height:l}=e.scrollArea.getBoundingClientRect(),{top:s,height:r}=o.getBoundingClientRect(),a=s-i+e.scrollArea.scrollTop,u=Math.max(0,Math.min(a-(l-r)/2,e.scrollArea.scrollHeight-e.scrollArea.clientHeight));Math.abs(u-e.scrollArea.scrollTop)>5&&(e.scrollArea.scrollTop=u)}}class d{static handleScroll(){const t=c.getVisibleIds();JSON.stringify(t)!==JSON.stringify(e.activeIds)&&(e.activeIds=t,g.update(e.activeIds))}static handleTOCScroll=()=>h.update();static handleResize(){c.build();const t=c.getVisibleIds();JSON.stringify(t)!==JSON.stringify(e.activeIds)&&(e.activeIds=t,g.update(e.activeIds)),h.update()}static init(){if(e.reset(),c.build(),e.headings.length===0){g.update([]);return}this.handleScroll(),setTimeout(h.update,100);const t={passive:!0};window.addEventListener("scroll",this.handleScroll,t),window.addEventListener("resize",this.handleResize,t),e.scrollArea?.addEventListener("scroll",this.handleTOCScroll,t)}static cleanup(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize),e.scrollArea?.removeEventListener("scroll",this.handleTOCScroll),Object.assign(e,{activeIds:[],headings:[],regions:[],scrollArea:null,tocScrollArea:null})}}document.addEventListener("astro:page-load",()=>d.init());document.addEventListener("astro:after-swap",()=>{d.cleanup(),d.init()});document.addEventListener("astro:before-swap",()=>d.cleanup());</script>  <article class="prose dark:prose-invert prose-zinc col-start-2 max-w-none prose-headings:font-mono prose-headings:tracking-tight prose-a:text-yellow-600 dark:prose-a:text-yellow-500 prose-code:text-yellow-600 dark:prose-code:text-yellow-300 prose-pre:border prose-pre:border-border prose-pre:bg-muted/50"> <h2 id="two-major-improvements-to-the-reading-experience">Two major improvements to the reading experience</h2>
<p>astro-erudite‚Äôs v1.6.0 brings about two significant enhancements that I‚Äôve been wanting to implement for quite some time! The first addresses a longstanding mobile <abbr title="User Experience">UX</abbr> issue, while the second introduces a content organization paradigm that I find interesting.</p>
<h3 id="mobile-navigation">Mobile navigation</h3>
<p>The original table of contents implementation was frankly inadequate for mobile users. While desktop users enjoyed a beautiful sticky sidebar with scroll-aware highlighting, mobile users were stuck with a basic collapsible <code>&lt;details&gt;{:html}</code> element that provided no indication of reading progress or current location within the post:</p>
<div class="max-w-xs mx-auto"><p><img src="/_astro/old-toc.BaApZnsD_Ab4au.webp" alt="Old TOC implementation" loading="lazy" decoding="async" fetchpriority="auto" width="456" height="807"></p></div>
<p>The new mobile navigation system introduces a sticky header that sits just below the main site navigation, featuring a circular progress indicator and dynamic section display. As you scroll through a post, the progress circle fills to show how far you‚Äôve read, while the text updates to reflect which section you‚Äôre currently viewing. Tapping on this header expands a comprehensive table of contents that mirrors the desktop experience but in a mobile-friendly format:</p>
<div class="flex gap-4 flex-wrap justify-center [&#38;_img,p]:m-0"><div class="max-w-xs"><p><img src="/_astro/new-toc-closed.D0O2kEAI_1Qnd3P.webp" alt="New TOC implementation (closed)" loading="lazy" decoding="async" fetchpriority="auto" width="452" height="807"></p></div><div class="max-w-xs"><p><img src="/_astro/new-toc-open.8IYMSzlj_Z2kQA0W.webp" alt="New TOC implementation (open)" loading="lazy" decoding="async" fetchpriority="auto" width="452" height="803"></p></div></div>
<p>This gives users the same level of navigation control as if they were on desktop, in a very intuitive and mobile-friendly format.</p>
<h3 id="subposts-for-hierarchical-content-organization">Subposts for hierarchical content organization</h3>
<p>The second major feature is something I‚Äôm calling ‚Äúsubposts,‚Äù a way to organize related content in a parent-child hierarchy within your blog. This concept came from when I was writing <a href="https://enscribe.dev/blog/japan-retrospective" rel="nofollow noreferrer noopener" target="_blank">this</a> travel blog post on my personal site, where I essentially wanted a ‚Äúsubpost‚Äù for each day of the trip since it was way too long to fit into a single post.</p>
<p>Instead of creating separate blog posts in a ‚Äúseries‚Äù (and thus clogging up your blog post listings with a bunch of smaller, tangentially-related posts), you can now automatically establish a parent-child relationship between posts by creating a folder for your main topic with an <code>index.mdx</code> file as your parent post, then adding additional <code>.mdx</code> files in the same folder as subposts. For example, this very post demonstrates the feature by containing two subposts that explore the technical implementation details of each feature. On desktop, we display a <code>&lt;SubpostsSidebar&gt;{:tsx}</code> component on the right-hand side of the page that shows a list of all the subposts alongside the parent post:</p>
<div class="flex gap-4 flex-wrap justify-center [&#38;_img,p,.expressive-code]:m-0"><div class="max-w-3xs border"><p><img src="/_astro/subposts-listing.Bwod0qY1_ZY8QL2.webp" alt="Subposts listing" loading="lazy" decoding="async" fetchpriority="auto" width="335" height="262"></p></div><div class="max-w-3xs"><div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.jdn72.css"/><script type="module" src="/_astro/ec.8zarh.js"></script><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash" class="wrap" style="--ecMaxLine:30ch"><code><div class="ec-line"><div class="code"><span style="--0:#6F42C1;--1:#B392F0">src/</span></div></div><div class="ec-line" style="--ecIndent:2ch"><div class="code"><span class="indent">  </span><span style="--0:#6F42C1;--1:#B392F0">content/</span></div></div><div class="ec-line" style="--ecIndent:4ch"><div class="code"><span class="indent">    </span><span style="--0:#6F42C1;--1:#B392F0">blog/</span></div></div><div class="ec-line" style="--ecIndent:6ch"><div class="code"><span class="indent">      </span><span style="--0:#6F42C1;--1:#B392F0">mobile-nav-and-subposts/</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#6F42C1;--1:#B392F0">index.mdx</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#6F42C1;--1:#B392F0">mobile-navigation.mdx</span></div></div><div class="ec-line" style="--ecIndent:8ch"><div class="code"><span class="indent">        </span><span style="--0:#6F42C1;--1:#B392F0">subposts.mdx</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="src/  content/    blog/      mobile-nav-and-subposts/        index.mdx        mobile-navigation.mdx        subposts.mdx"><div></div></button></div></figure></div></div></div>
<p>The file structure is intuitive: create a folder for your main topic with an <code>index.mdx</code> file as your parent post, then add additional <code>.mdx</code> files in the same folder as subposts. Astro‚Äôs file-based routing handles the URL structure automatically, creating paths like <code>/blog/subposts</code> for the parent post and <code>/blog/subposts/mobile-navigation</code> and <code>/blog/subposts/subposts</code> for the subposts.</p>
<h4 id="enhanced-navigation-patterns">Enhanced navigation patterns</h4>
<p>Of course, we need to adjust our <code>&lt;PostNavigation&gt;{:tsx}</code> component to support this new feature. Now, whenever we‚Äôre reading a subpost, we now have the option to traverse between subposts or even upwards to the parent post:</p>
<div class="border [&#38;_img,p]:m-0"><p><img src="/_astro/subpost-navigation.BdZGIOLv_1dlSjI.webp" alt="Subposts navigation" loading="lazy" decoding="async" fetchpriority="auto" width="1267" height="165"></p></div>
<p>This is contextually aware, meaning that if you‚Äôre reading a parent post (or a post with no children), then this component will only show adjacent parent-level posts.</p>
<h4 id="hint-this-is-great-for-technical-content">Hint: this is great for technical content</h4>
<p>The subposts feature particularly shines for technical content which is meant to educate. In a similar manner to a tutorial or a textbook, we can now fragment our content into more digestible and informative subposts which are easily traversable between each other and from the parent post, and the reader is now free to jump around to whichever subpost they‚Äôre interested in.</p>
<p>This post itself serves as an example, since you‚Äôre currently reading the parent post (which I‚Äôve called the ‚ÄúIndex‚Äù post in the <code>&lt;Breadcrumb&gt;{:tsx}</code> component) and the subposts are the two posts that I‚Äôve written about the technical implementation details of each feature.</p>
<p>What‚Äôs great about the way I engineered subposts is that it‚Äôs fully backwards-compatible with blog posts written before this, so there‚Äôs no need to define extra frontmatter metadata or manually establish the parent-child relationships between posts. It serves lovely on the <abbr title="Developer Experience">DX</abbr> side as well!</p>
<h2 id="go-ahead-and-read-the-subposts">Go ahead and read the subposts</h2>
<p>On desktop, the <code>&lt;SubpostsSidebar&gt;{:tsx}</code> sticks to the right column on your screen, and you can click on any of the subposts to read them. On mobile, it will turn into a <code>&lt;SubpostsHeader&gt;{:tsx}</code> component that will appear underneath the sticky header, above the sticky table of contents we just added.</p> </article>  <div id="subposts-sidebar-container" class="sticky top-20 col-start-3 row-span-1 mr-auto ml-8 hidden h-[calc(100vh-5rem)] max-w-md xl:block"> <astro-island uid="10OJth" prefix="r5" component-url="/_astro/scroll-area.SV-Nx2Ro.js" component-export="ScrollArea" renderer-url="/_astro/client.i8_f7Fkk.js" props="{&quot;className&quot;:[0,&quot;flex max-h-[calc(100vh-8rem)] flex-col overflow-y-auto&quot;],&quot;data-subposts-sidebar-scroll&quot;:[0,true]}" ssr client="load" opts="{&quot;name&quot;:&quot;ScrollArea&quot;,&quot;value&quot;:true}" await-children><div dir="ltr" data-slot="scroll-area" class="relative flex max-h-[calc(100vh-8rem)] flex-col overflow-y-auto" data-subposts-sidebar-scroll="true" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" data-slot="scroll-area-viewport" class="ring-ring/10 dark:ring-ring/20 dark:outline-ring/40 outline-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] focus-visible:ring-4 focus-visible:outline-1" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><astro-slot> <div class="px-4"> <ul class="space-y-1"> <li> <div class="text-foreground bg-muted subposts-sidebar-active-item flex items-center gap-2 rounded-md py-1.5 pr-3 pl-2 text-sm font-medium text-pretty"> <svg width="1em" height="1em" class="size-4 flex-shrink-0" aria-hidden="true" data-icon="lucide:book-open-text">   <symbol id="ai:lucide:book-open-text" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 7v14m4-9h2m-2-4h2M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4a4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3a3 3 0 0 0-3-3zm3-6h2M6 8h2"/></symbol><use href="#ai:lucide:book-open-text"></use>  </svg> <div class="flex flex-col"> <span class="line-clamp-2 text-pretty"> v1.6.0: &quot;Mobile Navigation &amp; Subposts&quot; </span> <span class="text-muted-foreground/80 text-xs"> 0 min read  </span> </div> </div> </li> <li class="ml-4 space-y-1"> <a href="/writing/mobile-nav-and-subposts/mobile-navigation" target="_self" class="duration-300 ease-in-out hover:text-foreground text-muted-foreground hover:bg-muted/50 subposts-sidebar-link flex items-center gap-2 rounded-md px-2 py-1.5 text-sm text-pretty transition-colors">  <svg width="1em" height="1em" class="size-4 flex-shrink-0" aria-hidden="true" data-icon="lucide:file">   <symbol id="ai:lucide:file" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"/><path d="M14 2v5a1 1 0 0 0 1 1h5"/></g></symbol><use href="#ai:lucide:file"></use>  </svg> <div class="flex flex-col"> <span class="line-clamp-2 text-pretty"> Implementing sticky mobile navigation </span> <span class="text-muted-foreground/80 text-xs"> 0 min read </span> </div>  </a><a href="/writing/mobile-nav-and-subposts/subposts" target="_self" class="duration-300 ease-in-out hover:text-foreground text-muted-foreground hover:bg-muted/50 subposts-sidebar-link flex items-center gap-2 rounded-md px-2 py-1.5 text-sm text-pretty transition-colors">  <svg width="1em" height="1em" viewBox="0 0 24 24" class="size-4 flex-shrink-0" aria-hidden="true" data-icon="lucide:file">   <use href="#ai:lucide:file"></use>  </svg> <div class="flex flex-col"> <span class="line-clamp-2 text-pretty"> Implementing file-based subpost routing </span> <span class="text-muted-foreground/80 text-xs"> 0 min read </span> </div>  </a> </li> </ul> </div> </astro-slot></div></div></div><!--astro:end--></astro-island> </div> <script type="module">class u{scrollArea=null;sidebarScrollArea=null;reset(){this.scrollArea=null,this.sidebarScrollArea=null}}const e=new u;class n{static update(){if(!e.scrollArea||!e.sidebarScrollArea)return;const{scrollTop:t,scrollHeight:a,clientHeight:o}=e.scrollArea,r=5,c=t<=r,i=t>=a-o-r;e.sidebarScrollArea.classList.toggle("mask-t-from-90%",!c),e.sidebarScrollArea.classList.toggle("mask-b-from-90%",!i)}}class A{static toActive(){if(!e.scrollArea)return;const t=e.scrollArea.querySelector(".subposts-sidebar-active-item");if(!t)return;const{top:a,height:o}=e.scrollArea.getBoundingClientRect(),{top:r,height:c}=t.getBoundingClientRect(),i=r-a+e.scrollArea.scrollTop,d=Math.max(0,Math.min(i-(o-c)/2,e.scrollArea.scrollHeight-e.scrollArea.clientHeight));e.scrollArea.scrollTop=d}}class l{static init(){e.reset();const t=document.getElementById("subposts-sidebar-container");t&&(e.scrollArea=t.querySelector("[data-radix-scroll-area-viewport]"),e.sidebarScrollArea=t.querySelector("[data-subposts-sidebar-scroll]"),e.scrollArea&&e.scrollArea.addEventListener("scroll",n.update,{passive:!0}),requestAnimationFrame(()=>{A.toActive(),setTimeout(n.update,100)}))}static cleanup(){e.scrollArea&&e.scrollArea.removeEventListener("scroll",n.update),e.reset()}}document.addEventListener("astro:page-load",()=>l.init());document.addEventListener("astro:after-swap",()=>{l.cleanup(),l.init()});document.addEventListener("astro:before-swap",()=>l.cleanup());</script>  <div class="col-start-2 pb-12"> <div class="mt-8 flex flex-col gap-4 border-t border-zinc-800 pt-8 sm:flex-row sm:justify-between"> <a href="/writing/rehype-patch" class="group flex flex-col gap-1 text-left sm:max-w-[45%]"> <span class="flex items-center gap-1 font-mono text-xs text-zinc-500 transition-colors group-hover:text-yellow-500"> <svg width="1em" height="1em" viewBox="0 0 24 24" class="size-3" data-icon="lucide:arrow-left">   <use href="#ai:lucide:arrow-left"></use>  </svg>
PREVIOUS_LOG
</span> <span class="group-hover:text-foreground line-clamp-2 text-sm font-bold text-zinc-300 transition-colors"> v1.3.0: ‚ÄúPatches in Production‚Äù </span> </a> <a href="/writing/callouts-component" class="group flex flex-col gap-1 text-right sm:max-w-[45%]"> <span class="flex items-center justify-end gap-1 font-mono text-xs text-zinc-500 transition-colors group-hover:text-yellow-500">
NEXT_LOG
<svg width="1em" height="1em" viewBox="0 0 24 24" class="size-3" data-icon="lucide:arrow-right">   <use href="#ai:lucide:arrow-right"></use>  </svg> </span> <span class="group-hover:text-foreground line-clamp-2 text-sm font-bold text-zinc-300 transition-colors"> v1.5.0: ‚ÄúA Callout Component for Nerds‚Äù </span> </a> </div> </div> </section> <button data-slot="button" class="items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive border hover:bg-muted hover:text-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 size-9 group fixed right-8 bottom-8 z-50 hidden bg-background border-border hover:border-yellow-500" id="scroll-to-top" title="Scroll to top" aria-label="Scroll to top"> <svg width="1em" height="1em" class="mx-auto size-4 transition-all group-hover:-translate-y-0.5 text-muted-foreground group-hover:text-yellow-500" data-icon="lucide:arrow-up">   <symbol id="ai:lucide:arrow-up" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 12l7-7l7 7m-7 7V5"/></symbol><use href="#ai:lucide:arrow-up"></use>  </svg> </button> <script type="module">if(document.querySelector(".katex")&&!document.querySelector('link[href*="katex.min.css"]')){const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css",document.head.appendChild(e)}</script>  </main> <footer class="border-t border-zinc-800 bg-zinc-950 py-8 mt-12 text-center md:text-left"> <div class="max-w-7xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-4 text-xs font-mono text-zinc-600"> <div class="flex flex-col gap-1"> <span>&copy; 2026 ALVITO.DEV. ALL SYSTEMS NOMINAL.</span> <span>BUILT WITH ASTRO // DEPLOYED VIA GITHUB ACTIONS</span> </div> <div class="flex items-center gap-6"> <a href="https://github.com/alvitodev" target="_blank" class="hover:text-yellow-500 transition-colors">[GITHUB]</a> <a href="https://linkedin.com/in/alvito" target="_blank" class="hover:text-yellow-500 transition-colors">[LINKEDIN]</a> <a href="/rss.xml" class="hover:text-yellow-500 transition-colors">[RSS_FEED]</a> </div> <div class="text-right"> <p>SITE_REVISION: <span class="text-yellow-500">7bd091b</span></p> <p>LATENCY: <span class="text-green-500">LOW</span></p> </div> </div> </footer> </body></html> <script type="module">document.addEventListener("astro:page-load",()=>{const o=document.getElementById("scroll-to-top"),t=document.querySelector("footer");o&&t&&(o.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",()=>{const e=t.getBoundingClientRect().top<=window.innerHeight;o.classList.toggle("hidden",window.scrollY<=300||e)}))});</script>